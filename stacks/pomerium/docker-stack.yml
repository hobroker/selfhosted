# title=Pomerium
# description=Identity-aware access proxy that enables secure access to internal applications
# logo=https://raw.githubusercontent.com/pomerium/pomerium/master/docs/.vuepress/public/img/logo-round.png
# categories=network

---
version: "3.2"

services:
  pomerium:
    image: pomerium/pomerium:latest
    environment:
      - COOKIE_SECRET=${COOKIE_SECRET:-H86GGEoBldvvkw3M+R9U36TJhamUkQaL77PYCs7aD5k=} # Secret key
    volumes:
      - /appdata/pomerium/data:/data:rw # Pomerium data location
      - /appdata/pomerium/sync/config.sh:/pomerium/config.env:ro
      - ${CONFIG_PATH:-/appdata/pomerium/sync}:/config # Config directory location
    ports:
      - target: 443
        published: 443
        protocol: tcp
        mode: host
    deploy:
      mode: replicated
      replicas: 1
      placement:
        constraints: [node.role == manager]
